\doxysection{Referencia del archivo lib/display7seg/display7seg.c}
\hypertarget{display7seg_8c}{}\label{display7seg_8c}\index{lib/display7seg/display7seg.c@{lib/display7seg/display7seg.c}}


Driver para display de 7 segmentos (4 dígitos, ánodo común) con multiplexación.  


{\ttfamily \#include "{}display7seg.\+h"{}}\newline
{\ttfamily \#include $<$pico/time.\+h$>$}\newline
{\ttfamily \#include $<$hardware/gpio.\+h$>$}\newline
\doxysubsubsection*{defines}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{display7seg_8c_a387ed4150aa48790ff88639c9dac67ab}{DISPLAY7\+SEG\+\_\+\+HOLD\+\_\+\+US}}~800
\begin{DoxyCompactList}\small\item\em Tiempo de retención por dígito (µs) para brillo/\+Hz del refresco. \end{DoxyCompactList}\end{DoxyCompactItemize}
\begin{Indent}\textbf{ Polaridades (ánodo común + PNP)}\par
{\em \begin{DoxyNote}{Nota}
En ánodo común, los segmentos se encienden con nivel bajo. 
\end{DoxyNote}
}\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{display7seg_8c_a59b53c200bd8d1e0aad24456e6f75889}{SEG\+\_\+\+ON}}~0
\item 
\#define \mbox{\hyperlink{display7seg_8c_ac17950b4fdd1a6284d51be052851204c}{SEG\+\_\+\+OFF}}~1
\item 
\#define \mbox{\hyperlink{display7seg_8c_a4f8f979f89598e27040f28028d95e4cf}{DIG\+\_\+\+ON}}~0
\item 
\#define \mbox{\hyperlink{display7seg_8c_a2379d8e0a538d4555ef420e235f31e50}{DIG\+\_\+\+OFF}}~1
\end{DoxyCompactItemize}
\end{Indent}
\doxysubsubsection*{Funciones}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{display7seg_8c_a58c86e3d5264ed368ee94953f885181a}{display7seg\+\_\+init}} (void)
\begin{DoxyCompactList}\small\item\em Inicializa pines y estado interno del display. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{display7seg_8c_ad29c30de523890a59ea9b4f2b6835d48}{display7seg\+\_\+set\+\_\+raw}} (uint8\+\_\+t d0, uint8\+\_\+t d1, uint8\+\_\+t d2, uint8\+\_\+t d3)
\begin{DoxyCompactList}\small\item\em Carga cuatro dígitos crudos en el buffer. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{display7seg_8c_a29d8cb888ece98bb23a2d33aaeecf129}{display7seg\+\_\+set\+\_\+s\+\_\+mmm}} (uint16\+\_\+t ms)
\begin{DoxyCompactList}\small\item\em Carga en el buffer un tiempo en formato s.\+mmm. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{display7seg_8c_ae231deab0cefa239b672af6fbb72ca4a}{display7seg\+\_\+refresh\+\_\+once}} (void)
\begin{DoxyCompactList}\small\item\em Refresca un dígito (multiplexado). Llamar muy seguido. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{display7seg_8c_a91a8eda324568027ef6b3bafdde07bed}{display7seg\+\_\+show\+\_\+ms\+\_\+block}} (uint16\+\_\+t ms, uint16\+\_\+t hold\+\_\+ms)
\begin{DoxyCompactList}\small\item\em Muestra s.\+mmm de forma bloqueante durante hold\+\_\+ms. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Descripción detallada}
Driver para display de 7 segmentos (4 dígitos, ánodo común) con multiplexación. 


\begin{DoxyItemize}
\item Segmentos a..g en GPIO 0..6 y punto decimal (DP) en GPIO 7.
\item Dígitos habilitados por transistores PNP en alto-\/lado (GPIO 28,27,26,21).
\item Formato s.\+mmm\+: el DP se enciende {\bfseries{solo}} cuando se refresca el dígito 0.
\item Multiplexado por software \begin{DoxyAuthor}{Autor}
Luis Castillo Chicaiza 
\end{DoxyAuthor}

\end{DoxyItemize}

\label{doc-define-members}
\Hypertarget{display7seg_8c_doc-define-members}
\doxysubsection{Documentación de «define»}
\Hypertarget{display7seg_8c_a2379d8e0a538d4555ef420e235f31e50}\index{display7seg.c@{display7seg.c}!DIG\_OFF@{DIG\_OFF}}
\index{DIG\_OFF@{DIG\_OFF}!display7seg.c@{display7seg.c}}
\doxysubsubsection{\texorpdfstring{DIG\_OFF}{DIG\_OFF}}
{\footnotesize\ttfamily \label{display7seg_8c_a2379d8e0a538d4555ef420e235f31e50} 
\#define DIG\+\_\+\+OFF~1}

Dígito deshabilitado \Hypertarget{display7seg_8c_a4f8f979f89598e27040f28028d95e4cf}\index{display7seg.c@{display7seg.c}!DIG\_ON@{DIG\_ON}}
\index{DIG\_ON@{DIG\_ON}!display7seg.c@{display7seg.c}}
\doxysubsubsection{\texorpdfstring{DIG\_ON}{DIG\_ON}}
{\footnotesize\ttfamily \label{display7seg_8c_a4f8f979f89598e27040f28028d95e4cf} 
\#define DIG\+\_\+\+ON~0}

Dígito habilitado (PNP conduce con bajo) \Hypertarget{display7seg_8c_a387ed4150aa48790ff88639c9dac67ab}\index{display7seg.c@{display7seg.c}!DISPLAY7SEG\_HOLD\_US@{DISPLAY7SEG\_HOLD\_US}}
\index{DISPLAY7SEG\_HOLD\_US@{DISPLAY7SEG\_HOLD\_US}!display7seg.c@{display7seg.c}}
\doxysubsubsection{\texorpdfstring{DISPLAY7SEG\_HOLD\_US}{DISPLAY7SEG\_HOLD\_US}}
{\footnotesize\ttfamily \label{display7seg_8c_a387ed4150aa48790ff88639c9dac67ab} 
\#define DISPLAY7\+SEG\+\_\+\+HOLD\+\_\+\+US~800}



Tiempo de retención por dígito (µs) para brillo/\+Hz del refresco. 

\Hypertarget{display7seg_8c_ac17950b4fdd1a6284d51be052851204c}\index{display7seg.c@{display7seg.c}!SEG\_OFF@{SEG\_OFF}}
\index{SEG\_OFF@{SEG\_OFF}!display7seg.c@{display7seg.c}}
\doxysubsubsection{\texorpdfstring{SEG\_OFF}{SEG\_OFF}}
{\footnotesize\ttfamily \label{display7seg_8c_ac17950b4fdd1a6284d51be052851204c} 
\#define SEG\+\_\+\+OFF~1}

Segmento inactivo (LED apagado) \Hypertarget{display7seg_8c_a59b53c200bd8d1e0aad24456e6f75889}\index{display7seg.c@{display7seg.c}!SEG\_ON@{SEG\_ON}}
\index{SEG\_ON@{SEG\_ON}!display7seg.c@{display7seg.c}}
\doxysubsubsection{\texorpdfstring{SEG\_ON}{SEG\_ON}}
{\footnotesize\ttfamily \label{display7seg_8c_a59b53c200bd8d1e0aad24456e6f75889} 
\#define SEG\+\_\+\+ON~0}

Segmento activo (LED encendido) 

\label{doc-func-members}
\Hypertarget{display7seg_8c_doc-func-members}
\doxysubsection{Documentación de funciones}
\Hypertarget{display7seg_8c_a58c86e3d5264ed368ee94953f885181a}\index{display7seg.c@{display7seg.c}!display7seg\_init@{display7seg\_init}}
\index{display7seg\_init@{display7seg\_init}!display7seg.c@{display7seg.c}}
\doxysubsubsection{\texorpdfstring{display7seg\_init()}{display7seg\_init()}}
{\footnotesize\ttfamily \label{display7seg_8c_a58c86e3d5264ed368ee94953f885181a} 
void display7seg\+\_\+init (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Inicializa pines y estado interno del display. 

\Hypertarget{display7seg_8c_ae231deab0cefa239b672af6fbb72ca4a}\index{display7seg.c@{display7seg.c}!display7seg\_refresh\_once@{display7seg\_refresh\_once}}
\index{display7seg\_refresh\_once@{display7seg\_refresh\_once}!display7seg.c@{display7seg.c}}
\doxysubsubsection{\texorpdfstring{display7seg\_refresh\_once()}{display7seg\_refresh\_once()}}
{\footnotesize\ttfamily \label{display7seg_8c_ae231deab0cefa239b672af6fbb72ca4a} 
void display7seg\+\_\+refresh\+\_\+once (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Refresca un dígito (multiplexado). Llamar muy seguido. 

\Hypertarget{display7seg_8c_ad29c30de523890a59ea9b4f2b6835d48}\index{display7seg.c@{display7seg.c}!display7seg\_set\_raw@{display7seg\_set\_raw}}
\index{display7seg\_set\_raw@{display7seg\_set\_raw}!display7seg.c@{display7seg.c}}
\doxysubsubsection{\texorpdfstring{display7seg\_set\_raw()}{display7seg\_set\_raw()}}
{\footnotesize\ttfamily \label{display7seg_8c_ad29c30de523890a59ea9b4f2b6835d48} 
void display7seg\+\_\+set\+\_\+raw (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{d0}{, }\item[{uint8\+\_\+t}]{d1}{, }\item[{uint8\+\_\+t}]{d2}{, }\item[{uint8\+\_\+t}]{d3}{}\end{DoxyParamCaption})}



Carga cuatro dígitos crudos en el buffer. 


\begin{DoxyParams}{Parámetros}
{\em d0} & D0 (izquierda) — válidos\+: 0..9, 10=BLANK \\
\hline
{\em d1} & D1 — válidos\+: 0..9, 10=BLANK \\
\hline
{\em d2} & D2 — válidos\+: 0..9, 10=BLANK \\
\hline
{\em d3} & D3 (derecha) — válidos\+: 0..9, 10=BLANK \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Nota}
Requiere refrescar con \doxylink{display7seg_8h_ae231deab0cefa239b672af6fbb72ca4a}{display7seg\+\_\+refresh\+\_\+once()}. 
\end{DoxyNote}
\Hypertarget{display7seg_8c_a29d8cb888ece98bb23a2d33aaeecf129}\index{display7seg.c@{display7seg.c}!display7seg\_set\_s\_mmm@{display7seg\_set\_s\_mmm}}
\index{display7seg\_set\_s\_mmm@{display7seg\_set\_s\_mmm}!display7seg.c@{display7seg.c}}
\doxysubsubsection{\texorpdfstring{display7seg\_set\_s\_mmm()}{display7seg\_set\_s\_mmm()}}
{\footnotesize\ttfamily \label{display7seg_8c_a29d8cb888ece98bb23a2d33aaeecf129} 
void display7seg\+\_\+set\+\_\+s\+\_\+mmm (\begin{DoxyParamCaption}\item[{uint16\+\_\+t}]{ms}{}\end{DoxyParamCaption})}



Carga en el buffer un tiempo en formato s.\+mmm. 


\begin{DoxyParams}{Parámetros}
{\em ms} & Milisegundos (0..9999). Se satura a 9999. \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Nota}
DP solo en el dígito 0. Requiere refresco periódico. 
\end{DoxyNote}
\Hypertarget{display7seg_8c_a91a8eda324568027ef6b3bafdde07bed}\index{display7seg.c@{display7seg.c}!display7seg\_show\_ms\_block@{display7seg\_show\_ms\_block}}
\index{display7seg\_show\_ms\_block@{display7seg\_show\_ms\_block}!display7seg.c@{display7seg.c}}
\doxysubsubsection{\texorpdfstring{display7seg\_show\_ms\_block()}{display7seg\_show\_ms\_block()}}
{\footnotesize\ttfamily \label{display7seg_8c_a91a8eda324568027ef6b3bafdde07bed} 
void display7seg\+\_\+show\+\_\+ms\+\_\+block (\begin{DoxyParamCaption}\item[{uint16\+\_\+t}]{ms}{, }\item[{uint16\+\_\+t}]{hold\+\_\+ms}{}\end{DoxyParamCaption})}



Muestra s.\+mmm de forma bloqueante durante hold\+\_\+ms. 


\begin{DoxyParams}{Parámetros}
{\em ms} & Valor (0..9999) \\
\hline
{\em hold\+\_\+ms} & Duración de visualización en ms \\
\hline
\end{DoxyParams}
